@model IoT.Web.Models.Mdl

@section scripts {
    @Scripts.Render("~/app/Management/DeviceViewModel.js")
    @Scripts.Render("~/app/Management/DeviceReportDirective.js")
    @Scripts.Render("~/app/common/dateSelector.js")
    @Scripts.Render("~/app/common/timeSeriesGraph.js")
    @Scripts.Render("~/Scripts/flot/jquery.flot.min.js")
    @Scripts.Render("~/Scripts/flot/jquery.flot.navigate.min.js")
    @Scripts.Render("~/Scripts/FileSaver.js")
}

<div ng-controller="DeviceViewModel" data-device-id="@Model.Id">
    <table width="100%">
        <tr>
            <td width="70%">
                <h2>Device - {{device.Name}}</h2>
            </td>
            <td>
                <a ng-href="{{parentServicePageUrl}}">Go to Service</a>
                <a ng-href="{{parentNetworkPageUrl}}">&nbsp;&nbsp;Go to Enclosing network</a>
            </td>
        </tr>
        <tr>
            <td width="70%" valign="top">
                <h3>Device data</h3>
                <div device-report-directive device="device"></div>
            </td>
            <td valign="top">
                <h3>Device properties</h3>

                <div ng-if="!editDeviceVisible">
                    <h4>Basic properties</h4>
                    <p>
                        <label>Id</label> {{device.Id}}
                    </p>
                    <label>Name</label> {{device.Name}} <br />
                    <label>DeviceKey</label> {{device.DeviceKey}} <br />
                    <a href="#" ng-click="showEditDevice()">Edit</a>
                </div>
                <div class="embeddedinputform" ng-if="editDeviceVisible">
                    <h4>Edit Device</h4>
                    <label class="thinlabelwidth" for="editName">Name</label><input type="text" name="editName" ng-model="editDevice.Name" /><br />
                    <button ng-click="saveDevice()">Save</button>
                    <a href="#" ng-click="cancelInput()">Cancel</a>
                </div>
                <br />
                <div url-info-directive></div>
            </td>
        </tr>
    </table>
</div>
